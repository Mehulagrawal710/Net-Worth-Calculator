<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!--AngularJS-->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script> -->
    
    <title></title>

	<style type="text/css">
        .box{
            border: 2px solid #ddd;
            padding: 2vw 5vw;
            width: 35vw;
            height: 50vh;
            margin-left: 10vw;
            text-align: center;
            position: relative;
            float: left;
            }
	</style>
</head>

<body>
    {% set asset_list = [] %}
    {% set liability_list = [] %}
    {% for entry in data %}
        {% if entry.category == 'asset' %}
            <!-- {{ asset_list.append(entry) }} -->
        {% else %}
            <!-- {{ liability_list.append(entry) }} -->
        {% endif %}
    {% endfor %}
    <center><h1>Net Worth Calculator</h1></center>
    <!-- <p>Application running at {{baseurl}}</p> -->
    <br>
    <span style="float: right; padding: 0 10px;">Logged in as: {{username}} | <a href="{{baseurl}}">Logout</a></span>
    <hr>
    <br>

    {% set net_worth = asset_list | sum(attribute="amount") - liability_list | sum(attribute="amount") %}
    <div class="box" style="border:0;padding: 0;">
        {% if net_worth > 0 %}
            <div style="border: 10px solid green; border-radius: 50%;height: inherit;width: 25vw; margin: 0 5vw;">
                <div style="top: 50%;left: 50%;-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);position: absolute;">
                    <h3>Your Net Worth</h3>
                    <h1 style="color: green;font-size: 3em;">Rs. {{ net_worth }}</h1>
                </div>
            </div>
        {% else %}
            <div style="border: 10px solid red; border-radius: 50%;height: inherit;width: 25vw; margin: 0 5vw;">
                <div style="top: 50%;left: 50%;-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);position: absolute;">
                    <h3>Your Net Worth</h3>
                    <h1 style="color: red;font-size: 3em;">Rs. {{ net_worth }}</h1>
                </div>
            </div>
        {% endif %}
    </div>

    <div class="box">
        <h4>+ Add Entry -</h4>
        <hr>
        <br>
        <form action = "{{baseurl}}{{username}}" method = "POST" enctype = "multipart/form-data">
            <label>Type: &nbsp;&nbsp;&nbsp;</label>
            <input type="radio" id="asset" name="category" value="asset">
            <label for="asset">Asset</label> 
            <input type="radio" id="liability" name="category" value="liability">
            <label for="liability">Liability</label><br>
            <br>
            <label for="title">Title: </label>
            <input type="text" id="title" name="title" />
            <br><br>
            <label for="amount">Amount: </label>
            <input type="text" id="amount" name="amount" />
            <br><br>
            <button type = "submit">Add</button>
        </form>
    </div>
    
    <div class="box" style="margin-top: 10vh; height: auto; margin-bottom: 20vh;">
        <h3>Assets</h3>
        <hr>
        <br>
        {% for entry in data if entry.category == 'asset' %}
            <p>
                <span style="float: left;">{{ entry.title }}</span>
                <span style="float: right;">Rs. {{ entry.amount }}</span>
            </p>
            <hr><br>
        {% endfor %}
        <p>
            <span style="float: left;"><b>Total</b></span>
            <span style="float: right;color: green">Rs. {{ asset_list | sum(attribute="amount") }}</span>
        </p>
    </div>

    <div class="box" style="margin-top: 10vh; height: auto; margin-bottom: 20vh;">
        <h3>Liabilities</h3>
        <hr>
        <br>
        {% for entry in data %}
            {% if entry.category=="liability" %}
                <p>
                    <span style="float: left;">{{ entry.title }}</span>
                    <span style="float: right;">Rs. {{ entry.amount }}</span>
                </p>
                <hr><br>
            {% endif %}
        {% endfor %}
        <p>
            <span style="float: left;"><b>Total</b></span>
            <span style="float: right;color: red">Rs. {{ liability_list | sum(attribute="amount") }}</span>
        </p>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.18.0/js/mdb.min.js"></script>
<script type="text/javascript">

</script>
</body>
</html>